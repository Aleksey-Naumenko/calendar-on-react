(this["webpackJsonpcalendar-on-react"]=this["webpackJsonpcalendar-on-react"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),i=(a(19),a(7)),s=a(1),l=a(2),u=a(4),p=a(3),m=a(5),d=(a(20),function(e){var t=e.week,a=e.onTodayBtnSwitcher,n=e.onWeekSwitcherForward,o=e.onWeekSwitcherBackward,c=e.onCreateBtn,i=function(e){for(var t,a=[],n=[],r=0;r<e.length;r++){var o=e[r].toDateString().split(" ")[1],c=e[r].toDateString().split(" ")[3];-1===a.indexOf(o)&&a.push(o),-1===n.indexOf(c)&&n.push(c)}return 1===a.length&&(t="".concat(a[0]," ").concat(n[0])),2===a.length&&(t="".concat(a[0]," - ").concat(a[1]," ").concat(n[0])),2===n.length&&(t="".concat(a[0]," ").concat(n[0]," - ").concat(a[1]," ").concat(n[1])),t}(t);return r.a.createElement("header",{className:"header"},r.a.createElement("button",{"data-id":"create-btn",onClick:function(){c()},className:"header__button_create"},r.a.createElement("i",{className:"fas fa-plus"}),"Create"),r.a.createElement("button",{className:"header__button_today",onClick:function(){return a()}},"Today"),r.a.createElement("div",{className:"header__week-toggle"},r.a.createElement("span",{onClick:function(){return o()},className:"header__week-toggle_chevron-left"},r.a.createElement("i",{className:"fas fa-chevron-left chevron"})),r.a.createElement("span",{onClick:function(){return n()},className:"header__week-toggle_chevron-right"},r.a.createElement("i",{className:"fas fa-chevron-right chevron"}))),r.a.createElement("span",{className:"header__current-month-year"},i))}),h=(a(21),a(12)),v=a.n(h),f=function(e){var t=e.day,a=new Date(t).getDate(),n=v()(new Date(t)).format("ddd"),o=new Date(t).toDateString()!==(new Date).toDateString()?"day-date":"day-date day-date_current";return r.a.createElement("div",{className:"day"},r.a.createElement("span",{className:"day-name"},n),r.a.createElement("div",{className:o},a))},w=function(e){var t=e.week;return r.a.createElement("nav",{className:"days-container"},r.a.createElement("div",{className:"gmt"},"gmt+02"),t.map((function(e){return r.a.createElement(f,{key:e.getDate(),day:e})})))},E=(a(23),a(10),function(e){var t=e.eventId,a=e.onDeleteEvent;return r.a.createElement("div",{onClick:function(){return a(t)},className:"day-event_delete"},"Delete")}),g=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={showDeletePopup:!1},a.onShowHidePopup=function(){a.setState({showDeletePopup:!a.state.showDeletePopup})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.event,a=(new Date(t.dateTo)-new Date(t.dateFrom))/1e3/60,n=new Date(t.dateFrom).getMinutes(),o={height:"".concat(a,"px"),marginTop:"".concat(n,"px"),background:"".concat(t.colorChooser)},c=new Date(t.dateFrom).getHours(),i=new Date(t.dateFrom).getMinutes()<10?"".concat(new Date(t.dateFrom).getMinutes(),"0"):new Date(t.dateFrom).getMinutes(),s=new Date(t.dateTo).getHours(),l=new Date(t.dateTo).getMinutes()<10?"".concat(new Date(t.dateTo).getMinutes(),"0"):new Date(t.dateTo).getMinutes();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:o,className:"day-event",onClick:function(t){e.onShowHidePopup(t)},id:this.props.id},this.state.showDeletePopup&&r.a.createElement(E,{eventId:this.props.id,onDeleteEvent:this.props.onDeleteEvent}),r.a.createElement("span",null,this.props.event.title),r.a.createElement("br",null),r.a.createElement("span",null,"".concat(c,":").concat(i," - ").concat(s,":").concat(l))))}}]),t}(n.Component),_=(a(24),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={currentMinute:(new Date).getMinutes()-4},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.indervalId=setInterval((function(){var t=(new Date).getMinutes()-4;e.setState({currentMinute:t})}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.indervalId)}},{key:"render",value:function(){return r.a.createElement("div",{className:"redline",style:{marginTop:"".concat(this.state.currentMinute,"px")}},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"line"}))}}]),t}(n.Component)),D=function(e){var t=e.event,a=e.date,n=e.hour,o=e.onDeleteEvent;return r.a.createElement("div",{className:"calendar__hour-bar"},a.toDateString()===(new Date).toDateString()&&n===(new Date).getHours()?r.a.createElement(_,{key:a}):null,t&&r.a.createElement(g,{event:t,onDeleteEvent:o,id:t.id}))},y=a(13),S=function(e){var t=e.events,a=e.onShowPopup,n=e.date,o=e.onDeleteEvent,c=Array(24).fill(null);return r.a.createElement("div",{className:"calendar__day-bar"},c.map((function(e,c){var i=function(e,t){var a=e.filter((function(e){return t===new Date(e.dateFrom).getHours()}));return Object(y.a)(a,1)[0]}(t,c);return r.a.createElement(D,{onDeleteEvent:o,event:i,hour:c,date:n,key:c,onShowPopup:a})})))},b=function(e){var t=e.week,a=e.events,n=e.onShowPopup,o=e.onDeleteEvent;return r.a.createElement("div",{className:"calendar__week-bar"},t.map((function(e){var t=function(e,t){return e.filter((function(e){return new Date(t).getDate()===new Date(e.dateFrom).getDate()&&new Date(t).getMonth()===new Date(e.dateFrom).getMonth()}))}(a,e);return r.a.createElement(S,{onDeleteEvent:o,key:Math.random(),events:t,onShowPopup:n,date:e})})))},k=(a(25),function(){var e=Array(24).fill(null);return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement("div",{className:"sidebar__hour",key:t},r.a.createElement("span",{className:"sidebar__hour-text"},"".concat(t>10?0+t:t+0,":00")))})))}),N=function(e){var t=e.week,a=e.events,n=e.onShowPopup,o=e.onDeleteEvent;return r.a.createElement("div",{className:"main-part"},r.a.createElement("div",{className:"sidebar"},r.a.createElement(k,null)),r.a.createElement("div",{className:"calendar"},r.a.createElement(b,{onDeleteEvent:o,week:t,events:a,onShowPopup:n})))},O=a(6),j=a(8),H=(a(26),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",dateFrom:"",dateTo:"",timeFrom:"",timeTo:"",colorChooser:"#293dce",description:"",id:""},a.changeHandler=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state;a.props.onSaveEvent(t),a.props.onPopupSwitcher()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=function(){var e=new Date,t={title:""};return t.dateFrom=e.toLocaleDateString().split(".").reverse().join("-"),t.dateTo=e.toLocaleDateString().split(".").reverse().join("-"),23===e.getHours()?(t.timeFrom="".concat(e.getHours(),":00"),t.timeTo="".concat(e.getHours(),":59")):9===e.getHours()?(t.timeFrom="0".concat(e.getHours(),":00"),t.timeTo="".concat(e.getHours()+1,":00")):e.getHours()>9?(t.timeFrom="".concat(e.getHours(),":00"),t.timeTo="".concat(e.getHours()+1,":00")):(t.timeFrom="0".concat(e.getHours(),":00"),t.timeTo="0".concat(e.getHours()+1,":00")),t.colorChooser="#26ecdb",t.description="",t.id=Math.floor(1e3*Math.random()),t}();this.setState(Object(O.a)({},e))}},{key:"render",value:function(){return r.a.createElement("div",{className:"popup-modal"},r.a.createElement("form",{className:"popup",onSubmit:this.onSubmit},r.a.createElement("div",{className:"popup__header"},r.a.createElement("i",{className:"fas fa-times popup__header_close-btn",onClick:this.props.onPopupSwitcher}),r.a.createElement("input",{className:"popup__header_title-input",type:"text",name:"title",placeholder:"Add Title",value:this.state.title,onChange:this.changeHandler})),r.a.createElement("div",{className:"popup__color-scheme"},r.a.createElement("label",{className:"popup__color-scheme_label"},r.a.createElement("span",{className:"popup__color-scheme_label-text"},"Choose a color"),r.a.createElement("input",{className:"popup__color-scheme_chooser",type:"color",name:"colorChooser",value:this.state.colorChooser,onChange:this.changeHandler}))),r.a.createElement("div",{className:"popup__info"},r.a.createElement("div",{className:"popup__info_icon"},r.a.createElement("i",{className:"far fa-clock"})),r.a.createElement("input",{className:"popup__info_date-from",type:"date",name:"dateFrom",value:this.state.dateFrom,onChange:this.changeHandler}),r.a.createElement("div",{className:"popup__info_duration"},r.a.createElement("input",{className:"popup__info_duration-from",name:"timeFrom",type:"time",value:this.state.timeFrom,onChange:this.changeHandler}),r.a.createElement("div",{className:"popup__info_duration-line"}," - "),r.a.createElement("input",{className:"popup__info_duration-to",name:"timeTo",type:"time",value:this.state.timeTo,onChange:this.changeHandler})),r.a.createElement("input",{className:"popup__info_date-to",type:"date",name:"dateTo",value:this.state.dateTo,onChange:this.changeHandler})),r.a.createElement("div",{className:"popup__description"},r.a.createElement("div",{className:"popup__description_icon"},r.a.createElement("i",{className:"fas fa-align-left"})),r.a.createElement("input",{className:"popup__description_text",type:"text",name:"description",placeholder:"Add Description",value:this.state.description,onChange:this.changeHandler})),r.a.createElement("div",{className:"popup__action"},r.a.createElement("span",{className:"popup__action_delete","data-id":"913",style:{visibility:"hidden"}},r.a.createElement("i",{className:"fas fa-trash-alt"})),r.a.createElement("button",{className:"popup__action_save",type:"submit"},"Save"))))}}]),t}(n.Component)),F=function(){for(var e=new Date,t=null,a=0;a<=7;a++)1!==e.getDay()?e.setDate(e.getDate()-1):t=e;return t},C="https://crudcrud.com/api/55d8c1a8a0c24bc9a107a8b22005b40d/events",T=function(){return fetch(C).then((function(e){return e.json()})).then((function(e){return e.map((function(e){var t=e._id,a=Object(i.a)(e,["_id"]);return Object(O.a)({},a,{id:t})}))}))},M=function(e){return fetch(C,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Internal Server Error. Can't save event")})).then((function(e){var t=e._id,a=Object(i.a)(e,["_id"]);return Object(O.a)({},a,{id:t})}))},P=function(e){return fetch("".concat(C,"/").concat(e),{method:"DELETE"})},W=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={firstDayOfWeek:F(),popupShown:!1,formData:null,events:[]},a.saveEventHandler=function(e){var t=e,n=t.timeFrom.split(":");t.dateFrom=new Date(new Date(t.dateFrom).setHours(+n[0],+n[1]));var r=t.timeTo.split(":");t.dateTo=new Date(new Date(t.dateTo).setHours(+r[0],+r[1])),""===t.title&&(t.title="No Title");t.id;var o=Object(i.a)(t,["id"]);M(o).then((function(e){var t=a.state.events;return t.push(e),a.setState({events:t})})).catch((function(e){return console.log(e)}))},a.todayBntSwitcher=function(){return a.setState({firstDayOfWeek:F()})},a.weekSwitcherForward=function(){var e=a.state.firstDayOfWeek,t=e.setDate(e.getDate()+7);a.setState({firstDayOfWeek:new Date(t)})},a.weekSwitcherBackward=function(){var e=a.state.firstDayOfWeek,t=e.setDate(e.getDate()-7);a.setState({firstDayOfWeek:new Date(t)})},a.popupSwitcher=function(){return a.setState({popupShown:!a.state.popupShown})},a.deleteEventHandler=function(e){P(e).then((function(){return T().then((function(e){return a.setState({events:e})}))})).catch((function(e){return console.log(e)}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){return e.setState({events:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=function(e){var t=Array(7).fill(null),a=new Date(e);return t.map((function(e){return e=new Date(a),a.setDate(a.getDate()+1),e}))}(this.state.firstDayOfWeek);return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,{week:e,onCreateBtn:this.popupSwitcher,onTodayBtnSwitcher:this.todayBntSwitcher,onWeekSwitcherForward:this.weekSwitcherForward,onWeekSwitcherBackward:this.weekSwitcherBackward}),r.a.createElement(w,{week:e}),r.a.createElement(N,{onDeleteEvent:this.deleteEventHandler,week:e,events:this.state.events}),this.state.popupShown&&r.a.createElement(H,{onHourBarClick:this.fillFormHandler,onSaveEvent:this.saveEventHandler,isShown:this.state.popupShown,onPopupSwitcher:this.popupSwitcher}))}}]),t}(n.Component);c.a.render(r.a.createElement(W,null),document.querySelector("#root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.d55415d8.chunk.js.map